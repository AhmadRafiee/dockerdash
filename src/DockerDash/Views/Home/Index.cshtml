@{
    ViewData["Title"] = "Home Page";
}

<script id="host" type="x-template">
    <div class="js-container" v-cloak>
        <div class="row">

            <div class="col-lg-5 col-md-5 " v-if="host">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-default">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-home"></span> Host</h3>
                            </div>
                            <div class="panel-body">
                                <div class="two-cols-stats">
                                    <span>
                                        <strong>{{ host.Name }}</strong> Name
                                    </span>
                                    <span>
                                        <strong>{{ host.NCPU }}</strong> CPU
                                    </span>
                                    <span>
                                        <strong>{{ host.MemTotal }}</strong> Memory
                                    </span>
                                    <span>
                                        <strong>{{ host.OperatingSystem }}</strong> OS
                                    </span>
                                    <span>
                                        <strong>{{ host.KernelVersion }}</strong> Kernel
                                    </span>
                                    <span>
                                        <strong>{{ host.Architecture }}</strong> Architecture
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-flash"></span> Docker server</h3>
                            </div>
                            <div class="panel-body">
                                <div class="two-cols-stats">
                                    <span>
                                        <strong>{{ host.ServerVersion }}</strong> Version
                                    </span>
                                    <span>
                                        <strong>{{ host.DefaultRuntime }}</strong> Runtime
                                    </span>
                                    <span>
                                        <strong>{{ host.NGoroutines }}</strong> Goroutines
                                    </span>
                                    <span>
                                        <strong>{{ host.Driver }}</strong> Driver
                                    </span>
                                    <span>
                                        <strong>{{ host.CgroupDriver }}</strong> Cgroup driver
                                    </span>
                                    <span>
                                        <strong>{{ host.LoggingDriver }}</strong> Logging driver
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-tasks"></span> Containers</h3>
                            </div>
                            <div class="panel-body">
                                <div class="two-cols-stats">
                                    <span>
                                        <strong>{{ host.ContainersRunning }}</strong> Running
                                    </span>
                                    <span>
                                        <strong>{{ host.ContainersPaused }}</strong> Paused
                                    </span>
                                    <span>
                                        <strong>{{ host.ContainersStopped }}</strong> Stopped
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-cloud"></span> Swarm</h3>
                            </div>
                            <div class="panel-body">
                                <div class="two-cols-stats">
                                    <span>
                                        <strong>{{ host.SwarmMode }}</strong> Swarm mode
                                    </span>
                                    <span>
                                        <strong>{{ host.SwarmManagers }}</strong> Managers
                                    </span>
                                    <span>
                                        <strong>{{ host.SwarmNodes }}</strong> Nodes
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

            <div class="col-lg-7 col-md-7  json-pannels" v-if="host">

                <div class="page-container">
                    <div role="tabpanel" v-if="containers">

                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#connections" aria-controls="connections" role="tab" data-toggle="tab">{{ host.Containers }} Containers</a></li>
                            <li role="presentation"><a href="#slowlogList" aria-controls="slowlogList" role="tab" data-toggle="tab">{{ host.Images }} Images</a></li>
                        </ul>

                        <div class="tab-content">

                            <div role="tabpanel" class="tab-pane active" id="connections">
                                <div class="input-group search">
                                    <input type="text" class="form-control" placeholder="Search" v-model="filterCon">
                                    <span class="input-group-addon glyphicon glyphicon-search"></span>
                                </div>

                                
                                    <ul class="list-group">
                                        <li class="list-group-item {{ item.State }}" v-for="item in containers | filterBy filterCon in 'Name' 'Image' 'State'" track-by="Id">
                                            <a v-link="{ name: 'container', params: { id: item.Id }}">
                                                <span class="list-item list-item-title">
                                                    <span class="glyphicon {{ item.State | statusGlyph }}"></span>
                                                    <span class="name"><strong>{{ item.Name }}</strong></span>
                                                    <span><small>Id:</small> {{ item.Id | truncate '12' }}</span> &bull;
                                                    <span><small>Image:</small> {{ item.Image }}</span>
                                                </span>
                                                <span class="row list-item list-item-body">
                                                    <span class="col-xs-9 left">
                                                        <span><small>Command:</small> {{ item.Command }}</span>
                                                        <span v-if="item.IpAddress"><small>IP:</small> {{ item.IpAddress }}</span>
                                                        <span v-if="item.Ports"><small>Ports:</small> {{ item.Ports }}</span>
                                                        <span><small>Status:</small> {{ item.Status }}</span>
                                                    </span>
                                                    <span class="col-xs-3 right">
                                                        <span><small>Created</small> <br />{{ item.Created }}</span>
                                                        <small class="list-item-link">Details <span class="glyphicon glyphicon-chevron-right"></span></small>
                                                    </span>
                                                </span>

                                            </a>
                                        </li>
                                    </ul>
                                

                            </div>

                            <div role="tabpanel" class="tab-pane" id="slowlogList">
                                
                                    
                                <div class="input-group search">
                                    <input type="text" class="form-control" placeholder="Search images" v-model="filterImg">
                                    <span class="input-group-addon glyphicon glyphicon-search"></span>
                                </div>


                                <ul class="list-group" v-if="images">
                                    <li class="list-group-item running" v-for="item in images | filterBy filterImg in 'RepoTags' 'Labels'" track-by="Id">
                                        <a>
                                            <span class="list-item list-item-title">
                                                <span class="glyphicon glyphicon-book"></span>
                                                <span class="name"><strong>{{ item.Name }}</strong></span>
                                            </span>
                                            <span class="row list-item list-item-body">
                                                <span class="col-xs-9 left">
                                                    <span><small>RepoTags:</small> {{ item.RepoTags }}</span>
                                                    <span><small>Size:</small> {{ item.Size }}</span>
                                                    <span><small>VirtualSize:</small> {{ item.VirtualSize }}</span>
                                                    <span v-if="item.ParentID"><small>ParentID:</small> {{ item.ParentID | truncate '12' }}</span>
                                                    <span v-if="item.Labels"><small>Labels:</small> {{ item.Labels }}</span>
                                                </span>
                                                <span class="col-xs-3 right">
                                                    <span><small>Created</small> <br />{{ item.Created }}</span>
                                                </span>
                                            </span>

                                        </a>
                                    </li>
                                </ul>
                                    
                                
                            </div>



                        </div>
                    </div>

                </div>
                </div>
        </div>
    </div>
</script>

<script id="container" type="x-template">
    <div class="js-container" v-cloak>
        <div class="row">

            <div class="col-lg-5 col-md-5 ">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-default" v-if="con">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-king"></span> {{ con.Name }}</h3>
                            </div>
                            <div class="panel-body">
                                <div class="two-cols-stats">
                                    <span>
                                        <strong>{{ con.Id | truncate '12' }}</strong> Id
                                    </span>
                                    <span>
                                        <strong>{{ con.State }}</strong> State
                                    </span>
                                    <span>
                                        <strong>{{ con.Created }}</strong> Created
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading master">
                                <h3 class="panel-title"><span class="glyphicon glyphicon-signal"></span> Memory {{ mem }}</h3>
                            </div>
                            <div class="panel-body">
                                <div>
                                    <canvas id="lineChart" height="100" width="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

            <div class="col-lg-7 col-md-7 json-pannels">
                <div class="page-container">
                    <div role="tabpanel" v-if="con">

                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#props" aria-controls="props" role="tab" data-toggle="tab">Props</a></li>
                            <li role="presentation"><a href="#logs" aria-controls="logs" role="tab" data-toggle="tab">Logs</a></li>
                        </ul>

                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="props">

                                <div class="definition-table row">
                                    <div class="col-xs-6">
                                        <dl>
                                            <dt>{{ con.Image }}</dt>
                                            <dd><small>Image</small></dd>
                                        </dl>
                                        <dl>
                                            <dt>{{ con.Command }}</dt>
                                            <dd><small>Command</small></dd>
                                        </dl>
                                        <dl>
                                            <dt>{{ con.Driver }}</dt>
                                            <dd><small>Driver</small></dd>
                                        </dl>
                                    </div>
                                    <div class="col-xs-6">
                                        <dl>
                                            <dt>{{ con.IpAddress }}</dt>
                                            <dd><small>IP</small></dd>
                                        </dl>
                                        <dl>
                                            <dt>{{ con.Ports }}</dt>
                                            <dd><small>Ports</small></dd>
                                        </dl>
                                    </div>
                                    
                                    
                                </div>

                            </div>
                            <div role="tabpanel" class="tab-pane" id="logs">
                               
                                    
                                        <pre>{{ logs }}</pre>
                                    
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</script>

<script id="about" type="x-template">
    <div class="about page-container">
        <ul>
            <li>
                <small>Project:</small>
                <span>DockerDash</span>
            </li>
            <li>
                <small>Version:</small>
                <span>@Microsoft.Extensions.PlatformAbstractions.PlatformServices.Default.Application.ApplicationVersion</span>
            </li>
            <li>
                <small>Git:</small>
                <span><a href="https://github.com/stefanprodan/dockerdash">Repo</a></span>
            </li>
            <li>
                <small>Copyright:</small>
                <span><a href="https://stefanprodan.com">Stefan Prodan</a></span>
            </li>
        </ul>
    </div>
</script>
